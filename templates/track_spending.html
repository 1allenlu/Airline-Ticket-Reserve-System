<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Spending</title>
</head>
<body>
    <h1>Track Spending</h1>

    <!-- Total Spending in the Past Year -->
    <h2>Total Spending in the Past Year</h2>
    {% if total_spent_year %}
        <p>Total: ${{ total_spent_year }}</p>
    {% else %}
        <p>No spending data available for the past year.</p>
    {% endif %}

    <!-- Month-Wise Spending for Last 6 Months -->
    <h2>Month-Wise Spending for Last 6 Months</h2>
    {% if month_data %}
        <table border="1">
            <tr>
                <th>Month</th>
                <th>Amount Spent ($)</th>
            </tr>
            {% for month in month_data %}
                <tr>
                    <td>{{ month['month'] }}</td>
                    <td>${{ month['total_spent'] }}</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No data available for the last 6 months.</p>
    {% endif %}

    <!-- Custom Date Range -->
    <h2>Track Spending for a Custom Date Range</h2>
    <form action="/track-spending" method="POST">
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" required>
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" required>
        <button type="submit">Submit</button>
    </form>

    {% if start_date and end_date %}
        <h3>Total Spending from {{ start_date }} to {{ end_date }}</h3>
        <p>Total: ${{ total_spent_range }}</p>

        <h3>Month-Wise Spending in the Specified Range</h3>
        {% if range_data %}
            <table border="1">
                <tr>
                    <th>Month</th>
                    <th>Amount Spent ($)</th>
                </tr>
                {% for month in range_data %}
                    <tr>
                        <td>{{ month['month'] }}</td>
                        <td>${{ month['total_spent'] }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p>No spending data available for the specified range.</p>
        {% endif %}
    {% endif %}

    <br>
    <a href="/customerpage">Back to Customer Page</a>
</body>
</html>